{"ast":null,"code":"import _objectSpread from\"/home/gimeba/hackernews-react-apollo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _toConsumableArray from\"/home/gimeba/hackernews-react-apollo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/home/gimeba/hackernews-react-apollo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _taggedTemplateLiteral from\"/home/gimeba/hackernews-react-apollo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";var _templateObject;import React,{useState}from'react';import{gql,useMutation}from'@apollo/client';import{useHistory}from'react-router';import{LINKS_PER_PAGE}from'../constants';import{FEED_QUERY}from'./LinkList';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var CREATE_LINK_MUTATION=gql(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  mutation CreateLink(\\n    $description: String!\\n    $url: String!\\n  ) {\\n    createLink(description: $description, url: $url) {\\n      id\\n      url\\n      description\\n    }\\n  }\\n\"])));var CreateLink=function CreateLink(){var history=useHistory();var _useState=useState({description:'',url:''}),_useState2=_slicedToArray(_useState,2),formState=_useState2[0],setFormState=_useState2[1];var _useMutation=useMutation(CREATE_LINK_MUTATION,{variables:{description:formState.description,url:formState.url},update:function update(cache,_ref){var post=_ref.data.post;var take=LINKS_PER_PAGE;var skip=0;var orderBy={createdAt:'desc'};var data=cache.readQuery({query:FEED_QUERY,variables:{take:take,skip:skip,orderBy:orderBy}});cache.writeQuery({query:FEED_QUERY,data:{feed:{links:[post].concat(_toConsumableArray(data.feed.links))}},variables:{take:take,skip:skip,orderBy:orderBy}});},onCompleted:function onCompleted(){return history.push('/new/1');}}),_useMutation2=_slicedToArray(_useMutation,1),createLink=_useMutation2[0];//Crea funcion para lmandar a otro componente\nfunction clickHistory(){history.push(\"/\");window.location.reload();}function refreshPage(){window.location.reload();}return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:function onSubmit(e){e.preventDefault();createLink();},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-column mt3\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"mb2\",value:formState.description,onChange:function onChange(e){return setFormState(_objectSpread(_objectSpread({},formState),{},{description:e.target.value}));},type:\"text\",placeholder:\"A description for the link\"}),/*#__PURE__*/_jsx(\"input\",{className:\"mb2\",value:formState.url,onChange:function onChange(e){return setFormState(_objectSpread(_objectSpread({},formState),{},{url:e.target.value}));},type:\"text\",placeholder:\"The URL for the link\"})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",onClick:function onClick(){createLink();clickHistory();//Se llama a la funcion\n},children:\"Submit\"})]})});};export default CreateLink;","map":{"version":3,"sources":["/home/gimeba/hackernews-react-apollo/src/components/CreateLink.js"],"names":["React","useState","gql","useMutation","useHistory","LINKS_PER_PAGE","FEED_QUERY","CREATE_LINK_MUTATION","CreateLink","history","description","url","formState","setFormState","variables","update","cache","post","data","take","skip","orderBy","createdAt","readQuery","query","writeQuery","feed","links","onCompleted","push","createLink","clickHistory","window","location","reload","refreshPage","e","preventDefault","target","value"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport { gql, useMutation } from '@apollo/client';\nimport { useHistory } from 'react-router';\nimport { LINKS_PER_PAGE } from '../constants';\nimport { FEED_QUERY } from './LinkList';\n\n\nconst CREATE_LINK_MUTATION = gql`\n  mutation CreateLink(\n    $description: String!\n    $url: String!\n  ) {\n    createLink(description: $description, url: $url) {\n      id\n      url\n      description\n    }\n  }\n`;\n\nconst CreateLink = () => {\n  const history = useHistory();\n  const [formState, setFormState] = useState({\n    description: '',\n    url: ''\n  });\n\n\n const [createLink] = useMutation(CREATE_LINK_MUTATION, {\n    variables: {\n      description: formState.description,\n      url: formState.url\n    },\n    update: (cache, { data: { post } }) => {\n      const take = LINKS_PER_PAGE;\n      const skip = 0;\n      const orderBy = { createdAt: 'desc' };\n\n      const data = cache.readQuery({\n        query: FEED_QUERY,\n        variables: {\n          take,\n          skip,\n          orderBy\n        }\n      });\n\n      cache.writeQuery({\n        query: FEED_QUERY,\n        data: {\n          feed: {\n            links: [post, ...data.feed.links]\n          }\n        },\n        variables: {\n          take,\n          skip,\n          orderBy\n        }\n      });\n    },\n    onCompleted: () => history.push('/new/1')\n  });\n\n\n\n//Crea funcion para lmandar a otro componente\n  function clickHistory(){\n    history.push(\"/\");\n    window.location.reload()\n  }\n  function refreshPage(){\n    window.location.reload()\n  }\n  return (\n    <div>\n      <form\n        onSubmit={(e) => {\n          e.preventDefault();\n          createLink();\n        }}\n      >\n        <div className=\"flex flex-column mt3\">\n          <input\n            className=\"mb2\"\n            value={formState.description}\n            onChange={(e) =>\n              setFormState({\n                ...formState,\n                description: e.target.value\n              })\n            }\n            type=\"text\"\n            placeholder=\"A description for the link\"\n          />\n          <input\n            className=\"mb2\"\n            value={formState.url}\n            onChange={(e) =>\n              setFormState({\n                ...formState,\n                url: e.target.value\n              })\n            }\n            type=\"text\"\n            placeholder=\"The URL for the link\"\n          />\n        </div>\n        <button type=\"submit\"  onClick={ () => {\n        createLink()\n          clickHistory() //Se llama a la funcion\n\n        } }>Submit</button>\n      </form>\n    </div>\n  );\n};\n\nexport default CreateLink;"]},"metadata":{},"sourceType":"module"}